def encode_label(data: str) -> str:
    if '=' in data:
        left, right = data[1:-2].split('=', maxsplit=1)
        return f"{left}.{right}"

    else:
        data = data.lstrip('B').rstrip('?').replace('/', '-').lower().split("^")
        return '.'.join([x.strip(' ') for x in data])


def decode_label(data: str) -> str:
    labels = data.split('.')

    if len(labels) == 2:
        return f"{labels[0]}={labels[1]}"
    else:
        return f"B{'^'.join(labels).replace('-', '/').upper()}?"


if __name__ == "__main__":
    print(encode_label(";490303340561001048=080510109123345678?8"))
    print(decode_label("90303340561001048.0805101091233456"))

    print(encode_label("B4675411282528536404^ANNA/WAGNER                 ^1021636825858745101229201100?"))
    print(decode_label("4675411282528536404.ANNA-WAGNER.1021636825858745101229201100"))
